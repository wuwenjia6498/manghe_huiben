# 联系客服二维码弹窗功能说明

## ✨ 功能更新

将"联系客服"功能从显示电话号码改为显示微信二维码，方便用户直接扫码添加客服微信。

## 📋 修改内容

### 1. 创建微信二维码图片

**文件**: `images/wechat-qrcode.svg`

**说明**:
- 创建了一个示例性的微信二维码 SVG 图片
- 包含标准的二维码样式和微信标识
- 尺寸：200x200px
- **重要**：这是一个示例图片，需要替换为实际的客服微信二维码

### 2. 修改个人中心页面结构

**文件**: `pages/profile/profile.wxml`

**新增内容**: 自定义二维码弹窗

```xml
<!-- 客服二维码弹窗 -->
<view class="qrcode-modal" wx:if="{{showQrcodeModal}}" catchtap="onCloseQrcode">
  <view class="qrcode-content" catchtap="{{''}}">
    <view class="qrcode-title">添加客服微信</view>
    <image class="qrcode-image" src="/images/wechat-qrcode.svg" mode="aspectFit"></image>
    <view class="qrcode-tips">扫描二维码添加客服微信</view>
    <view class="qrcode-info">工作时间：09:00 - 21:00</view>
    <view class="qrcode-close" bindtap="onCloseQrcode">关闭</view>
  </view>
</view>
```

**特点**:
- 点击蒙层关闭弹窗
- 点击内容区域不关闭
- 包含客服工作时间提示
- 提供关闭按钮

### 3. 修改页面逻辑

**文件**: `pages/profile/profile.js`

**修改前**:
```javascript
onCustomerServiceTap() {
  wx.showModal({
    title: '联系客服',
    content: '客服电话：400-123-4567\n工作时间：09:00-18:00',
    showCancel: false,
    confirmText: '我知道了'
  });
}
```

**修改后**:
```javascript
// 新增数据字段
data: {
  showQrcodeModal: false  // 控制二维码弹窗显示
},

// 显示二维码弹窗
onCustomerServiceTap() {
  this.setData({
    showQrcodeModal: true
  });
},

// 关闭二维码弹窗
onCloseQrcode() {
  this.setData({
    showQrcodeModal: false
  });
}
```

### 4. 添加弹窗样式

**文件**: `pages/profile/profile.wxss`

**新增样式**:
- `.qrcode-modal` - 全屏蒙层
- `.qrcode-content` - 弹窗主体
- `.qrcode-title` - 标题
- `.qrcode-image` - 二维码图片
- `.qrcode-tips` - 扫码提示
- `.qrcode-info` - 工作时间
- `.qrcode-close` - 关闭按钮
- `@keyframes slideUp` - 滑入动画

**设计特点**:
- 半透明黑色蒙层
- 白色圆角卡片
- 从下往上滑入动画
- 渐变色关闭按钮（品牌粉色）

## 🎨 视觉效果

### 弹窗布局

```
┌─────────────────────────────────────┐
│                                     │
│         添加客服微信                 │
│                                     │
│      ┌─────────────────┐           │
│      │                 │           │
│      │   [二维码图片]   │           │
│      │                 │           │
│      └─────────────────┘           │
│                                     │
│     扫描二维码添加客服微信            │
│     工作时间：09:00 - 21:00         │
│                                     │
│     ┌─────────────────┐            │
│     │      关闭        │            │
│     └─────────────────┘            │
│                                     │
└─────────────────────────────────────┘
```

### 交互效果

1. **打开弹窗**: 从下往上滑入，带淡入效果
2. **关闭弹窗**: 
   - 点击蒙层区域
   - 点击"关闭"按钮
   - 都会关闭弹窗

## 📱 使用流程

```
用户端个人中心页
  ↓
点击"联系客服"
  ↓
显示二维码弹窗
  ↓
用户扫码添加客服微信
  ↓
点击关闭按钮或蒙层
  ↓
弹窗消失，返回个人中心
```

## ⚙️ 技术实现

### 1. 弹窗显示控制

使用 `wx:if` 条件渲染：
```xml
<view wx:if="{{showQrcodeModal}}">
  <!-- 弹窗内容 -->
</view>
```

### 2. 事件冒泡控制

```xml
<!-- 点击蒙层关闭 -->
<view catchtap="onCloseQrcode">
  <!-- 点击内容不关闭 -->
  <view catchtap="{{''}}">
    <!-- 弹窗内容 -->
  </view>
</view>
```

### 3. 图片显示

```xml
<image 
  src="/images/wechat-qrcode.svg" 
  mode="aspectFit"
/>
```

## 🔄 替换真实二维码

### 步骤1：生成客服微信二维码

1. 打开微信客户端
2. 进入"我" → "微信号"
3. 点击右上角"..."
4. 选择"我的二维码"
5. 点击"保存图片"

### 步骤2：替换图片文件

方法1：直接替换文件
```
将保存的二维码图片重命名为 wechat-qrcode.png
替换 images/wechat-qrcode.svg 文件
```

方法2：使用不同的文件名
```
1. 将二维码上传到 images/ 目录
2. 修改 profile.wxml 中的图片路径：
   src="/images/你的二维码文件名.png"
```

### 步骤3：调整图片大小（可选）

如果图片太大或太小，可以修改样式：

```css
/* 在 profile.wxss 中修改 */
.qrcode-image {
  width: 500rpx;   /* 调整宽度 */
  height: 500rpx;  /* 调整高度 */
}
```

## 💡 优化建议

### 1. 添加长按保存功能

```javascript
onLongPressQrcode() {
  wx.saveImageToPhotosAlbum({
    filePath: '/images/wechat-qrcode.png',
    success: () => {
      wx.showToast({
        title: '已保存到相册',
        icon: 'success'
      });
    }
  });
}
```

### 2. 添加复制微信号功能

```xml
<view class="wechat-id" bindtap="onCopyWechatId">
  微信号：your_wechat_id
  <text class="copy-icon">复制</text>
</view>
```

```javascript
onCopyWechatId() {
  wx.setClipboardData({
    data: 'your_wechat_id',
    success: () => {
      wx.showToast({
        title: '已复制微信号',
        icon: 'success'
      });
    }
  });
}
```

### 3. 添加多个客服选择

```xml
<view class="service-list">
  <view class="service-item" bindtap="onSelectService" data-id="1">
    <image src="/images/service-1-qrcode.png"/>
    <text>售前客服</text>
  </view>
  <view class="service-item" bindtap="onSelectService" data-id="2">
    <image src="/images/service-2-qrcode.png"/>
    <text>售后客服</text>
  </view>
</view>
```

## 🎯 优势对比

### 修改前（电话方式）
- ❌ 需要用户手动拨打电话
- ❌ 工作时间外无法联系
- ❌ 沟通不够便捷
- ❌ 无法保存聊天记录

### 修改后（微信二维码）
- ✅ 扫码即可添加，方便快捷
- ✅ 随时可以留言
- ✅ 支持图文、语音等多种沟通方式
- ✅ 聊天记录永久保存
- ✅ 符合用户使用习惯

## 📊 预期效果

1. **提高客服转化率**：用户更愿意通过微信咨询
2. **降低沟通成本**：文字沟通比电话更高效
3. **提升用户体验**：符合移动互联网使用习惯
4. **方便客户管理**：微信可以添加标签、备注

## 🚀 测试步骤

1. 进入个人中心页面
2. 点击"联系客服"
3. ✅ 应该弹出二维码弹窗
4. ✅ 显示二维码图片
5. ✅ 显示提示文字和工作时间
6. ✅ 点击蒙层或关闭按钮可以关闭弹窗
7. ✅ 弹窗有滑入动画效果

---

**功能完成时间**: 2025-10-16  
**修改人员**: AI助手  
**测试状态**: 待测试 ⏳  
**重要提醒**: ⚠️ 记得替换为真实的客服微信二维码图片！

