<!--pages/address/address.wxml-->
<view class="address-container">
  <!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->
  <view class="custom-navbar">
    <!-- ç©ºç™½å¯¼èˆªæ ï¼Œä¿æŒå“ç‰Œè‰²èƒŒæ™¯ -->
  </view>

  <!-- åœ°å€æ ‡é¢˜åŒºåŸŸ -->
  <view class="address-header">
    <view class="address-back-btn" bindtap="onBackTap">
      <image src="/images/back-arrow-gray.svg" class="back-arrow-icon" />
    </view>
    <view class="address-title-section">
      <text class="address-title">{{fromOrder ? 'é€‰æ‹©æ”¶è´§åœ°å€' : 'æ”¶è´§åœ°å€'}}</text>
    </view>
    <view class="address-placeholder"></view>
  </view>

  <!-- åœ°å€åˆ—è¡¨ -->
  <view class="address-content">
    <view wx:if="{{addressList.length > 0}}" class="address-list">
      <view class="address-item" wx:for="{{addressList}}" wx:key="id">
        <!-- åœ°å€ä¿¡æ¯ -->
        <view wx:if="{{fromOrder}}" class="address-info" bindtap="onSelectAddress" data-address="{{item}}">
          <view class="address-top">
            <view class="name-phone">
              <text class="name">{{item.name}}</text>
              <text class="phone">{{item.phone}}</text>
            </view>
            <view wx:if="{{item.isDefault}}" class="default-tag">é»˜è®¤</view>
            <view class="select-icon">></view>
          </view>
          
          <view class="address-detail">{{item.detail}}</view>
        </view>
        
        <view wx:else class="address-info">
          <view class="address-top">
            <view class="name-phone">
              <text class="name">{{item.name}}</text>
              <text class="phone">{{item.phone}}</text>
            </view>
            <view wx:if="{{item.isDefault}}" class="default-tag">é»˜è®¤</view>
          </view>
          
          <view class="address-detail">{{item.detail}}</view>
          
          <!-- åœ°å€æ“ä½œ -->
          <view class="address-actions">
            <view class="action-left">
              <view 
                class="default-btn {{item.isDefault ? 'active' : ''}}" 
                bindtap="onSetDefault" 
                data-id="{{item.id}}"
              >
                <view class="radio-btn">
                  <view class="radio-inner {{item.isDefault ? 'checked' : ''}}"></view>
                </view>
                <text>è®¾ä¸ºé»˜è®¤</text>
              </view>
            </view>
            
            <view class="action-right">
              <view class="edit-btn" bindtap="onEditAddress" data-address="{{item}}">
                ç¼–è¾‘
              </view>
              <view class="delete-btn" bindtap="onDeleteAddress" data-id="{{item.id}}">
                åˆ é™¤
              </view>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:else class="empty-address">
      <view class="empty-icon">ğŸ“</view>
      <view class="empty-text">æš‚æ— æ”¶è´§åœ°å€</view>
      <view class="empty-desc">æ·»åŠ æ”¶è´§åœ°å€ï¼Œè®©è´­ç‰©æ›´ä¾¿æ·</view>
    </view>
  </view>

  <!-- åº•éƒ¨æ·»åŠ æŒ‰é’® -->
  <view class="bottom-add">
    <view class="add-address-btn" bindtap="onAddAddress">
      <view class="add-icon">+</view>
      <text>æ·»åŠ æ–°åœ°å€</text>
    </view>
  </view>
</view> 